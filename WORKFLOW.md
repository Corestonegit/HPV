# Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –¥–µ–ø–ª–æ—è

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

- **`main`** - –ø—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ç–∫–∞ (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
- **`develop`** - –≤–µ—Ç–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π)

---

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### 1. –†–∞–±–æ—Ç–∞ –≤ –ø–∞–ø–∫–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (C:\HPW-dev)

```bash
cd C:\HPW-dev

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞ –≤–µ—Ç–∫–µ develop
git checkout develop
git pull origin develop

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ç–∫—É –¥–ª—è —Ñ–∏—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
git checkout -b feature/–Ω–∞–∑–≤–∞–Ω–∏–µ-—Ñ–∏—á–∏
```

### 2. –í–Ω–µ—Å–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

- –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –≤ `C:\HPW-dev`
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ (–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend –∏ frontend)

### 3. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
cd C:\HPW-dev

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git status

# –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª—ã
git add .

# –°–¥–µ–ª–∞–π—Ç–µ –∫–æ–º–º–∏—Ç
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ develop –Ω–∞ GitHub
git push origin develop
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å—Ç–µ–Ω–¥–µ

### –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä:

```bash
# –ù–∞ —Ç–µ—Å—Ç–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ
cd /opt/HPV-test
git checkout develop
git pull origin develop

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ backend
cd backend
source venv/bin/activate
pip install -r requirements.txt
systemctl restart hpv-backend-test

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ frontend
cd ../frontend
npm install
npm run build
systemctl reload nginx-test
```

---

## –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω (main)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Pull Request (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ù–∞ GitHub:**
   - –°–æ–∑–¥–∞–π—Ç–µ Pull Request: `develop` ‚Üí `main`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –°–º–µ—Ä–∂–∏—Ç–µ PR

2. **–ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   cd /opt/HPV
   git checkout main
   git pull origin main
   
   # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ backend
   cd backend
   source venv/bin/activate
   pip install -r requirements.txt
   systemctl restart hpv-backend
   
   # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ frontend
   cd ../frontend
   npm install
   npm run build
   systemctl reload nginx
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä—è–º–æ–π merge (–±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–±)

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ –≤ C:\HPW-dev
cd C:\HPW-dev
git checkout develop
git pull origin develop

# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ main
git checkout main
git pull origin main

# –°–º–µ—Ä–∂–∏—Ç–µ develop –≤ main
git merge develop

# –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞ GitHub
git push origin main
```

–ó–∞—Ç–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Å–º. –≤—ã—à–µ).

---

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

```bash
nano /opt/HPV/update.sh
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
```bash
#!/bin/bash

set -e

echo "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ HPV –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ..."

cd /opt/HPV

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ GitHub
echo "üì• –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ GitHub..."
git checkout main
git pull origin main

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Backend
echo "üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Backend..."
cd backend
source venv/bin/activate
pip install -r requirements.txt
systemctl restart hpv-backend

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Frontend
echo "üé® –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Frontend..."
cd ../frontend
npm install
npm run build

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx
echo "üåê –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx..."
systemctl reload nginx

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ: https://hpv.corestone.ru"
```

**–°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:**
```bash
chmod +x /opt/HPV/update.sh
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
/opt/HPV/update.sh
```

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow

### –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞:

1. **–£—Ç—Ä–æ–º:**
   ```bash
   cd C:\HPW-dev
   git checkout develop
   git pull origin develop
   ```

2. **–í —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è:**
   - –î–µ–ª–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ
   - –î–µ–ª–∞–π—Ç–µ –∫–æ–º–º–∏—Ç—ã –≤ `develop`

3. **–í –∫–æ–Ω—Ü–µ –¥–Ω—è:**
   ```bash
   git push origin develop
   ```

### –†–µ–ª–∏–∑ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω:

1. **–ö–æ–≥–¥–∞ –≥–æ—Ç–æ–≤–æ –∫ —Ä–µ–ª–∏–∑—É:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `develop` –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
   - –°–æ–∑–¥–∞–π—Ç–µ Pull Request –Ω–∞ GitHub
   - –ü–æ—Å–ª–µ –º–µ—Ä–¥–∂–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `/opt/HPV/update.sh`

---

## –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /opt/HPV
git log --oneline -10  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã
git checkout <commit-hash>  # –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –Ω—É–∂–Ω–æ–º—É –∫–æ–º–º–∏—Ç—É
# –∏–ª–∏
git reset --hard origin/main  # –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –∏–∑ GitHub

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
systemctl restart hpv-backend
cd frontend
npm run build
systemctl reload nginx
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –≤–µ—Ç–∫–∞–º–∏
git diff main..develop

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤
git log --oneline --graph --all

# –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥ –¥–ª—è –≤–µ—Ä—Å–∏–∏
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```
C:\HPW\          - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
C:\HPW-dev\       - –ü–∞–ø–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–≤–µ—Ç–∫–∞ develop)

/opt/HPV\         - –ü—Ä–æ–¥–∞–∫—à–µ–Ω —Å–µ—Ä–≤–µ—Ä (–≤–µ—Ç–∫–∞ main)
```

---

## –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ `develop`
- [ ] `develop` –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ GitHub
- [ ] –°–æ–∑–¥–∞–Ω Pull Request (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å–∞–π—Ç–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

